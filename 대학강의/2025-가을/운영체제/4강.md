# 운영체제 구조: 핵심 원리 및 구성요소 분석

## Executive Summary

본 문서는 운영체제의 핵심 구조와 기능을 심층적으로 분석한다. 운영체제는 컴퓨터 하드웨어와 사용자 사이의 인터페이스로서, 프로세스, 메모리, 파일, 입출력 장치 등 시스템 자원을 효율적으로 관리하고 보호하는 중추적 역할을 수행한다. 주요 기능은 크게 **프로세스 관리, 기억장치(주기억 및 보조기억) 관리, 파일 및 입출력 시스템 관리, 자원 관리**로 분류된다.

사용자 프로그램은 **시스템 호출(System Call)**이라는 프로그래밍 인터페이스를 통해 운영체제의 서비스를 요청하며, 이 과정에서 사용자 모드에서 커널 모드로의 전환이 발생한다. 운영체제의 내부 구조는 보호 기능이 거의 없는 **단순 구조(MS-DOS, 초기 UNIX)**부터 모듈성과 검증 용이성을 높인 **계층적 구조(THE, Venus)**까지 다양하며, 각각의 구조는 효율성과 설계 복잡성 사이의 장단점을 가진다. 마지막으로 **가상 기계(Virtual Machine)** 개념은 물리적 하드웨어를 추상화하여 각 프로세스에 독립적인 실행 환경을 제공함으로써 완벽한 자원 보호와 시스템 개발 유연성을 확보하며, 이는 자바 가상 머신(JVM)을 통해 플랫폼 독립성을 구현한 대표적인 사례이다.

## 1. 운영체제의 핵심 구성 요소 및 기능

운영체제는 컴퓨터 시스템의 자원을 관리하고 사용자에게 편리한 인터페이스를 제공하기 위해 다양한 구성 요소를 갖추고 있으며, 각각의 요소는 명확한 기능을 담당한다.

### 프로세스 관리 (Process Management)

프로세스는 '실행 중인 프로그램'으로, 하나의 작업 단위를 의미한다. 운영체제는 사용자 및 시스템 프로세스의 효율적인 관리를 위해 다음과 같은 핵심 기능을 수행한다.

- **생성과 제거**: 사용자 및 시스템 프로세스를 생성하고 제거한다.
- **중지와 재개**: 프로세스 스케줄링을 통해 실행을 중지시키거나 다시 시작한다.
- **동기화 및 통신**: 여러 프로세스가 원활하게 협력할 수 있도록 동기화 및 통신 기법(IPC)을 제공한다.
- **교착상태(Deadlock) 방지**: 자원 경쟁으로 인해 프로세스가 무한 대기 상태에 빠지는 것을 방지하는 기법을 제공한다.

### 메모리 관리 (Memory Management)

프로그램이 실행되려면 저장장치에서 읽어와 주기억장치(RAM)에 적재되어야 한다. 메모리 관리는 이 과정을 효율적이고 안전하게 처리하는 것을 목표로 한다.

- **주기억장치 관리**: 휘발성이며 용량이 제한적인 주기억장치의 사용 현황을 추적하고, 어떤 프로세스를 적재할지 결정하며, 각 프로세스에 메모리 공간을 할당하고 회수한다. 또한, 다른 프로세스의 메모리 영역을 침범하지 못하도록 보호 기능을 제공한다.
- **보조기억장치 관리**: 비휘발성 저장 장치인 보조기억장치를 관리하여 주기억장치를 백업한다. 주요 기능으로는 빈 공간 관리, 저장 공간 할당, 그리고 디스크 접근 요청의 처리 순서를 결정하는 디스크 스케줄링이 있다.

### 파일 및 입출력 시스템 관리

운영체제는 물리적인 장치들을 추상화하여 일관된 방식으로 관리한다.

- **파일 관리**: 관련된 정보의 집합인 '파일'이라는 개념을 사용하여 입출력을 관리한다. 파일 및 폴더의 생성과 삭제, 조작을 위한 연산을 제공하며, 보조기억장치에 파일을 매핑하고 데이터 손실 방지를 위한 백업 및 복구 기능을 수행한다.
- **입출력(I/O) 시스템 관리**: 프로세스를 대신하여 입출력 장치에 작업을 요청하고 결과를 전달한다. 이를 위해 버퍼링(Buffering), 캐싱(Caching), 스풀링(Spooling)과 같은 기법을 사용하며, 특정 하드웨어를 제어하기 위한 장치 구동기(Device Driver)와 인터럽트(Interrupt) 처리 기능을 포함한다.

### 핵심 자원 관리 및 보호

운영체제는 시스템의 다양한 자원을 효율적으로 분배하고 보호하는 역할을 수행한다.

- **자원 관리 기법**:
    - **버퍼링 (Buffering)**: 데이터 전송 속도 차이를 완화하기 위해 데이터를 임시 메모리 공간(버퍼)에 저장하는 기법.
    - **캐싱 (Caching)**: 더 빠른 저장 장치(캐시)에 자주 사용하는 데이터의 복사본을 저장하여 접근 속도를 높이는 기법.
    - **스풀링 (Spooling)**: 프린터와 같이 한 번에 하나의 작업만 처리할 수 있는 장치에 여러 요청을 보내면, 이를 순서대로 처리하기 위해 디스크의 큐(Queue)에 작업을 모아두는 기법.
- **네트워킹 (Networking)**: 네트워크 접근을 파일 접근과 유사한 형태로 일반화하여 제공한다. 각종 통신 프로토콜을 지원하고 네트워크 장치 구동기를 위한 인터페이스를 제공한다.
- **보호 시스템 (Protection System)**: 다중 사용자 또는 다중 프로세스 환경에서 하나의 프로세스나 사용자가 다른 주체의 자원에 허가 없이 접근하는 것을 제어한다. 이는 주기억장치, 파일 등 공유 자원에 대한 독점을 방지하고 시스템의 안정성을 보장한다.
- **명령 해석기 (Command Interpreter)**: 사용자의 키보드나 마우스 입력을 받아 해석하고 해당하는 시스템 작업을 수행하는 프로그램이다. 쉘(Shell)이라고도 불리며, MS-DOS나 UNIX에서는 커널 외부에 독립된 프로그램으로 존재한다.

## 2. 운영체제 서비스와 시스템 호출

운영체제는 사용자 및 프로그램에 다양한 서비스를 제공하며, 시스템 호출은 이러한 서비스를 이용하기 위한 공식적인 통로이다.

### 서비스의 목표

운영체제가 제공하는 서비스는 크게 두 가지 목적으로 나눌 수 있다.

1. **프로그래머 편의성 증진**:
    - **프로그램 실행**: 프로그램을 메모리에 적재하고 실행하는 기능.
    - **입출력 수행**: 파일이나 입출력 장치에 대한 접근 및 조작.
    - **파일 시스템 조작**: 파일 및 디렉터리의 생성, 삭제, 읽기, 쓰기.
    - **통신**: 프로세스 간 정보 교환 (공유 메모리, 메시지 전달 방식).
    - **오류 검출**: 하드웨어나 사용자 프로그램에서 발생하는 오류를 감지하고 대응.
2. **시스템 효율성 증대**:
    - **자원 할당**: 다수의 사용자나 프로세스에게 자원을 효율적으로 분배.
    - **자원 사용 정보 (Accounting)**: 어떤 사용자가 어떤 자원을 얼마나 사용했는지 추적.
    - **보호 (Protection)**: 시스템 자원에 대한 접근 제어.

### 시스템 호출: 커널과의 인터페이스

- **정의 및 역할**: 시스템 호출은 사용자 프로그램이 운영체제 커널에게 서비스를 요청하기 위해 사용하는 프로그래밍 인터페이스이다. 시스템 호출이 발생하면, 컴퓨터 시스템은 **사용자 모드(User Mode)**에서 **커널 모드(Kernel Mode)**로 전환되어 요청된 작업을 수행하고, 완료 후 다시 사용자 모드로 복귀한다.
- **주요 유형**: 시스템 호출은 기능에 따라 다음과 같이 분류할 수 있다.

|   |   |   |
|---|---|---|
|분류|주요 기능|예시|
|**프로세스 제어**|프로세스 생성, 종료, 속성 설정, 대기, 메모리 할당 및 해제|`fork()`, `exec()`, `exit()`, `wait()`|
|**파일 관리**|파일 생성, 삭제, 열기, 닫기, 읽기, 쓰기, 속성 설정|`create()`, `delete()`, `open()`, `close()`|
|**장치 관리**|장치 사용 요청 및 해제, 읽기, 쓰기, 논리적 부착 및 제거|장치 드라이버 관련 함수|
|**정보 유지 보수**|시간 및 날짜 요청, 시스템 정보 및 프로세스/파일 속성 획득|시스템 정보 관련 함수|
|**통신**|통신 연결 생성 및 제거, 데이터 전송 및 수신|`Message Queue`, `Semaphore`, `FIFO`|

## 3. 운영체제 시스템 구조

운영체제는 내부 구성 방식에 따라 여러 구조로 나뉘며, 각 구조는 설계의 단순성, 효율성, 안정성 측면에서 특징을 보인다.

### 단순 구조 (Simple Structure)

작고 간단하며 제한된 구조를 가지며, 계층이나 모듈 구분이 명확하지 않다.

- **MS-DOS**: 메모리 상주 시스템 프로그램, ROM BIOS 드라이버, 장치 드라이버가 하나의 계층 없이 혼재되어 있다. 보호 기능이 없어 오류가 발생한 응용 프로그램이 전체 시스템을 중단시킬 수 있다.
- **초기 UNIX**: 방대한 기능이 하나의 커널에 결합된 일체형(Monolithic) 구조이다. 시스템 호출 인터페이스와 커널이 명확히 구분되지만, 커널 내부 기능들(파일 시스템, CPU 스케줄링, 가상 메모리 등)은 분리되지 않았다.

### 계층적 구조 (Layered Structure)

운영체제를 여러 개의 계층(Layer)으로 나누어 설계하는 방식이다. 각 계층은 바로 하위 계층의 기능과 서비스만을 이용하여 구현된다.

- **특징**: 하드웨어를 가장 낮은 계층(Layer 0)으로 두고, 사용자 인터페이스를 최상위 계층(Layer N)으로 둔다.
- **장점**: 구조가 명확하여 모듈화(Modularity)가 용이하고, 각 계층을 독립적으로 디버깅하고 검증할 수 있어 개발 및 유지보수가 편리하다.
- **단점**: 계층 간 통신 시 오버헤드가 발생하여 단순 구조에 비해 비효율적일 수 있으며, 각 기능에 대한 명확한 계층 정의가 어렵다.
- **사례**: THE, Venus, OS/2 운영체제가 대표적인 예이다.

### 시스템 프로그램

운영체제 커널 상위에서 동작하며, 프로그램 개발과 실행을 위한 편리한 환경을 제공하는 프로그램들이다. 컴파일러, 어셈블러, 텍스트 편집기, 로더, 디버거, 파일 전송 프로그램 등이 이에 해당한다.

## 4. 가상 기계의 개념과 활용

가상 기계(VM)는 물리적 컴퓨터 시스템 위에 소프트웨어적인 추상 계층을 만들어, 마치 여러 대의 독립된 컴퓨터가 작동하는 것과 같은 환경을 제공하는 기술이다.

### 가상 기계(VM)의 정의 및 특징

가상 기계는 각 프로세스가 자신만의 프로세서와 메모리를 가진 것처럼 느끼게 하는 환상을 제공한다. 이는 물리적 하드웨어를 다중 프로그래밍하여 여러 개의 가상 환경을 동시에 실행하는 방식으로 구현된다.

- **장점**:
    - **완벽한 자원 보호**: 각 가상 기계는 서로 완벽하게 격리되어 있어, 하나의 VM에서 발생한 오류가 다른 VM이나 호스트 시스템에 영향을 미치지 않는다.
    - **시스템 개발 시간 단축**: 새로운 운영체제를 개발하거나 테스트할 때, 실제 시스템을 재부팅할 필요 없이 가상 기계 상에서 빠르고 안전하게 실행할 수 있다.
- **단점**:
    - **자원 공유의 어려움**: 가상 기계들은 서로 격리되어 있기 때문에 파일 시스템과 같은 자원을 직접 공유하기가 어렵다.

### 사례 연구: 자바 가상 머신 (JVM)

자바 가상 머신(JVM)은 가상 기계 개념을 응용한 가장 성공적인 사례 중 하나이다.

- **동작 원리**: 자바 소스 코드는 자바 컴파일러에 의해 바이트코드(Bytecode)로 변환된다. 이 바이트코드는 물리적인 CPU가 아닌 JVM 상에서 실행된다.
- **플랫폼 독립성**: 윈도우, macOS, 리눅스 등 어떤 운영체제나 인텔, ARM 등 어떤 하드웨어라도 JVM만 설치되어 있으면 동일한 자바 바이트코드를 수정 없이 실행할 수 있다. 이는 "한 번 작성하면, 어디서든 실행된다(Write Once, Run Anywhere)"는 자바의 핵심 철학을 가능하게 한다.