# TCP/IP 전송 계층: TCP와 UDP 프로토콜

## 핵심 요약

본 문서는 TCP/IP 4계층의 핵심인 전송 계층(Transport Layer)과 이 계층의 주요 프로토콜인 TCP(Transmission Control Protocol) 및 UDP(User Datagram Protocol)의 특징과 작동 방식을 종합적으로 분석한다. 전송 계층은 포트 번호를 사용하여 애플리케이션의 최종 목적지까지 데이터 전송을 담당하는 핵심적인 역할을 수행한다.

TCP는 3-way Handshaking으로 연결을 설정하고 4-way Handshaking으로 연결을 종료하는 연결 지향형 프로토콜이다. 순서 제어, 흐름 제어, 혼잡 제어 등 정교한 메커니즘을 통해 데이터의 신뢰성 있는 종단 간 교환을 보장하며, HTTP, FTP 등 신뢰성이 중요한 애플리케이션에 사용된다. 반면, UDP는 연결 과정 없이 데이터를 전송하는 비연결형 프로토콜로, 신뢰성을 보장하지 않지만 간소한 헤더 구조 덕분에 빠른 전송 속도를 제공한다. 이로 인해 데이터 손실의 위험이 존재하며, 신뢰성이 필요한 경우 별도의 제어 프로토콜을 구현해야 한다.

## 1. 전송 계층(Transport Layer)의 역할과 특징

전송 계층은 TCP/IP 프로토콜 스택의 핵심 계층으로, OSI 7계층 모델의 3계층(네트워크)과 4계층(전송)에 해당한다. 이 계층의 주된 목표는 애플리케이션 프로세스 간의 논리적 통신을 제공하는 것이다.

### 핵심 기능

- **애플리케이션 간 데이터 전송**: 최종 목적지 컴퓨터의 특정 애플리케이션까지 데이터(세그먼트)를 전송하는 역할을 담당한다.
- **데이터 송수신 담당**: 전체 데이터 통신 과정에서 송신과 수신을 직접적으로 관리한다.
- **포트 번호 사용**: 데이터를 수신할 정확한 애플리케이션을 식별하기 위해 포트 번호(Port Number)라는 논리적 주소를 사용한다.

### 포트 번호(Port Number)

포트 번호는 컴퓨터 시스템 내에서 특정 애플리케이션을 고유하게 식별하고 통신하기 위해 사용되는 숫자 값이다. 포트 번호는 용도에 따라 세 가지 주요 범위로 구분된다.

|   |   |   |
|---|---|---|
|종류|범위|설명|
|**웰 노운 포트 (Well-known Ports)**|0 ~ 1023|서버 애플리케이션용으로 국제 할당 기관(IANA)에 의해 예약된 포트. (예: HTTP-80, FTP-21)|
|**등록된 포트 (Registered Ports)**|1024 ~ 49151|자주 사용되는 특정 서버 애플리케이션을 식별하기 위해 등록된 포트.|
|**동적 포트 (Dynamic Ports)**|49152 ~ 65535|클라이언트 애플리케이션이 서버에 연결할 때 임시로 할당받아 사용하는 포트.|

## 2. TCP (Transmission Control Protocol) 분석

TCP는 전송 제어 프로토콜로, 신뢰성 있는 데이터 전송을 보장하는 데 중점을 둔다. 주요 웹 프로토콜인 HTTP를 비롯하여 파일 전송 프로토콜(FTP), 이메일 프로토콜(SMTP) 등 대다수의 인터넷 서비스가 TCP를 기반으로 작동한다.

### 핵심 특징

- **연결 지향성 (Connection-Oriented)**: 데이터를 전송하기 전에 송신자와 수신자 간에 논리적인 연결을 설정하는 과정을 거친다.
- **신뢰성 있는 데이터 교환**: 데이터 전송 확인, 순서 보장, 오류 제어 등 다양한 메커니즘을 통해 데이터가 손실되거나 순서가 뒤바뀌지 않고 정확하게 전달되도록 보장한다.

### 연결 및 종료 절차

TCP는 신뢰성 있는 연결을 관리하기 위해 명확하게 정의된 절차를 따른다.

- **연결 수립 (3-way Handshaking)**: 통신을 시작하기 위해 양측이 총 3단계의 패킷 교환을 통해 연결을 설정한다.
- **연결 종료 (4-way Handshaking)**: 통신을 안전하게 종료하기 위해 총 4단계의 패킷 교환 과정을 거친다.

### 신뢰성 보장 메커니즘

TCP는 헤더(Header)에 포함된 다양한 필드 값을 활용하여 데이터 전송의 신뢰성을 확보한다.

- **순서 제어 (Sequence Control)**: `Sequence Number` 필드를 사용하여 데이터 조각(세그먼트)의 순서를 부여하고, 수신 측에서 이를 재조립하여 데이터의 순서를 보장한다.
- **수신 확인 (Acknowledgement)**: `Acknowledge Number` 필드를 사용하여 특정 데이터를 성공적으로 수신했음을 송신 측에 알린다.
- **흐름 제어 (Flow Control)**: `Window Size` 필드를 통해 수신 측이 한 번에 처리할 수 있는 데이터의 양을 송신 측에 통보하여, 수신 측의 버퍼가 넘치지 않도록 데이터 전송량을 조절한다.
- **오류 제어 (Error Control)**: `Checksum` 필드를 사용하여 전송 중 데이터에 오류가 발생했는지 검사한다.

### 혼잡 제어 (Congestion Control)

혼잡 제어는 네트워크의 용량(대역폭)을 초과하는 데이터 전송을 방지하기 위해 네트워크로 유입되는 트래픽의 양을 동적으로 제어하는 기법이다. TCP는 다음과 같은 다양한 방법을 활용한다.

- **주요 기법**:
    - Slow Start
    - Congestion Avoidance
    - Fast Retransmission
    - Fast Recovery
- **구현 방식**:
    - TCP Tahoe
    - TCP Reno

## 3. UDP (User Datagram Protocol) 분석

UDP는 사용자 데이터그램 프로토콜로, TCP와 달리 신뢰성보다는 속도와 효율성에 중점을 둔다.

### 핵심 특징

- **비연결성 (Connectionless)**: 데이터를 보내기 전에 연결을 설정하는 과정이 없다.
- **빠른 전송 속도**: TCP의 복잡한 제어 메커니즘이 없어 상대적으로 빠른 데이터 전송이 가능하다.
- **간소한 헤더 구조**: 포트 번호, 체크섬 등 필수적인 정보만 포함하는 단순한 헤더를 가진다.
- **비신뢰성**: 데이터 전송을 보장하지 않으며, 전송 과정에서 데이터가 손실되거나 순서가 바뀔 수 있다.

### 주요 고려사항

UDP는 데이터의 신뢰성을 보장하지 않기 때문에, 애플리케이션 수준에서 신뢰성 확보가 필요할 경우 별도의 제어 프로토콜을 정의하여 함께 사용해야 한다. 데이터 손실이 발생할 수 있다는 점은 UDP를 사용하는 애플리케이션 설계 시 반드시 고려해야 할 핵심 요소이다. 이 때문에 실시간 스트리밍이나 DNS 쿼리와 같이 속도가 중요하고 일부 데이터 손실을 감내할 수 있는 서비스에 주로 활용된다.