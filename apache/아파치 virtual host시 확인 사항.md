아파치의 기능중 하나인 virtual host를 사용하면 도메인에 따라 여러개의 웹사이트를 운영하기 편하다. 그런데 막상 도메인에 대한 폴더를 만들고 테스트를 해보면 403 오류가 나오는 경우가 있다

## 사례

	1. .conf 파일
	2. 리눅스 권한


###  .conf 파일
```
아파치 virtual host 설정 파일을 확인한다. 
이때 설치된 아파치의 버전이나 사용자의 세팅에 따라 이름이나 경로가 다를 수 있다.
(vhosts.conf 또는 httpd.conf)
<Directory> 태그 안에 Require이 있는 문장을 확인한다.

```
액세스 제한은 Require로 작성을 한다. all를 사용하여 모두 허용(granted) 하거나 모두 거부(denied)할 수 있다. 그리고 host, ip 를 사용하여 특정 호스트나 IP 주소에 대해 허용 및 거부할 수 있다.

|형식|의미|
|---|---|
|Require all granted|모든 액세스 허용|
|Require all denied|모든 액세스 거부|
|Require ip IP-주소|해당 IP 주소 허용|
|Require not ip IP-주소|해당 IP 주소 거부|
|Require host 호스트|해당 호스트 허용|
|Require not host 호스트|해당 호스트 거부|
### 리눅스 권한
```
예상치 못한 문제라 원인을 찾는데 시간이 걸렸다.
ls -al 명령어로 권한을 확인한 후에야 읽기 권한이 없다는 것을 알았다.
chmod 명령어로 읽기 권한을 부여하니 해결되었다.
```

#### 권한 변경
```
chmod [권한] [변경할 파일 또는 디렉터리]
```

1) 권한 부여

- **g(그룹), u(사용자), o(다른 사용자), a(모두)**에 권한을 부여
- **(+)**를 사용하여 **권한을 부여**

```
chmod g+rw testfile2               //해당 그룹에 속하는 유저에게 읽기/쓰기 권한 부여
chmod u+r testfile2                //해당 파일을 소유한 사람에게 읽기 권한 부여
chmod ugo+rwx testfile2            //소유자, 그룹, 모든 유저에게 읽기/쓰기/실행 권한 부여
```

2) 권한삭제

- **g(그룹), u(사용자), o(다른 사용자), a(모두)**에 권한을 삭제
- **(-)**를 사용하여 **권한** **제외**

```
chmod g-rw testfile2              //해당 그룹에 속하는 유저에게 읽기/쓰기 권한 삭제
chmod u-r testfile2               //해당 파일을 소유한 사람에게 읽기 권한을 삭제
chmod ugo-rwx testfile2           //소유자, 그룹, 모든 유저에게 읽기/쓰기/실행 권한 삭제
```

3) 숫자로 변경

- **숫자를 활용**하여 g(그룹), u(사용자), o(다른 사용자), a(모두)에 권한을 지정

```
chmod 777 testfile2                //사용자,그룹,다른사용자 : 읽기/쓰기/실행 권한
chmod 755 testfile2                //사융자 :읽기/쓰기/실행 권한, 그룹 : 읽기/실행 권한, 모든유저: 읽기/실행 권한
chmod 421 testfile2                //사용자 :읽기 권한 , 그룹 : 쓰기 권한, 모든유저: 실행 권한
```